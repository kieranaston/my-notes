
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../computer-assisted-surgery/">
      
      
        <link rel="next" href="../transformations/">
      
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Transformation representations - Kieran's notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="brown" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transformation-representations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Kieran&#39;s notes" class="md-header__button md-logo" aria-label="Kieran's notes" data-md-component="logo">
      
  <img src="../../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kieran's notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Transformation representations
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Kieran&#39;s notes" class="md-nav__button md-logo" aria-label="Kieran's notes" data-md-component="logo">
      
  <img src="../../../img/logo.png" alt="logo">

    </a>
    Kieran's notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Surgical data science
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Surgical data science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Computer-assisted surgery
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Computer-assisted surgery
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../what-is-surgical-data-science/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../computer-assisted-surgery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computer-assisted surgery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Transformation representations
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Transformation representations
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#euler-angle-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Euler angle representation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rotation-matrix-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Rotation matrix representation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#axis-angle-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Axis angle representation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Axis angle representation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#finding-the-axis-vector" class="md-nav__link">
    <span class="md-ellipsis">
      Finding the axis vector
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Quaternions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quaternions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sum-of-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Sum of quaternions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-of-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Product of quaternions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-conjugate" class="md-nav__link">
    <span class="md-ellipsis">
      Complex conjugate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inverse" class="md-nav__link">
    <span class="md-ellipsis">
      Inverse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties-of-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Properties of quaternions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-rotations" class="md-nav__link">
    <span class="md-ellipsis">
      Applying rotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composing-rotations" class="md-nav__link">
    <span class="md-ellipsis">
      Composing rotations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pros-and-cons-of-different-rotation-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and cons of different rotation methods
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transformations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vectors-and-coordinates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vectors and coordinates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pivot-calibration-and-spin-calibration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pivot calibration and spin calibration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fiducial-registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fiducial registration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../icp-registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ICP registration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image-registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image registration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#euler-angle-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Euler angle representation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rotation-matrix-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Rotation matrix representation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#axis-angle-representation" class="md-nav__link">
    <span class="md-ellipsis">
      Axis angle representation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Axis angle representation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#finding-the-axis-vector" class="md-nav__link">
    <span class="md-ellipsis">
      Finding the axis vector
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Quaternions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quaternions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sum-of-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Sum of quaternions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-of-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Product of quaternions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complex-conjugate" class="md-nav__link">
    <span class="md-ellipsis">
      Complex conjugate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inverse" class="md-nav__link">
    <span class="md-ellipsis">
      Inverse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties-of-quaternions" class="md-nav__link">
    <span class="md-ellipsis">
      Properties of quaternions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-rotations" class="md-nav__link">
    <span class="md-ellipsis">
      Applying rotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composing-rotations" class="md-nav__link">
    <span class="md-ellipsis">
      Composing rotations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pros-and-cons-of-different-rotation-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Pros and cons of different rotation methods
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="transformation-representations">Transformation representations</h1>
<h2 id="euler-angle-representation">Euler angle representation</h2>
<div class="arithmatex">\[
R_Z(\gamma)=\begin{bmatrix}\cos \gamma &amp; -\sin \gamma &amp; 0\\
\sin \gamma &amp; \cos \gamma &amp; 0\\
0 &amp; 0 &amp; 1\end{bmatrix}
\]</div>
<div class="arithmatex">\[
R_Y(\beta)=\begin{bmatrix}\cos \beta &amp; 0 &amp; \sin \beta\\
0 &amp; 1 &amp; 0\\
-\sin \beta &amp; 0 &amp; \cos \beta\end{bmatrix}
\]</div>
<div class="arithmatex">\[
R_X(\alpha)=\begin{bmatrix}1 &amp; 0 &amp; 0\\
0 &amp; \cos \alpha &amp; -\sin \alpha\\
0 &amp; \sin \alpha &amp; \cos \alpha\end{bmatrix}
\]</div>
<p>Performs these rotations sequentially: <span class="arithmatex">\(R=R_Z(\gamma)R_Y(\beta)R_X(\alpha)\)</span></p>
<p>Some sequences and angles (like <span class="arithmatex">\(ZYX\)</span>, or <span class="arithmatex">\(\beta=\pm90^\circ\)</span>) can lead to a loss of one degree of freedom.</p>
<p>Order matters, so some ambiguity there.</p>
<h2 id="rotation-matrix-representation">Rotation matrix representation</h2>
<p>If we multiply our euler angle rotations into a single matrix, we get a rotation matrix that performs the entire rotation in one matrix multiplication operation.</p>
<p>We can also add an extra dimension (homogeneous coordinates) to combine rotation and translation into a single matrix. The top-right 3x1 vector is the translation vector, and the bottom row would be [0 0 0 1]. To make this work we add another dimension to the vector we are multiplying as well, 1 if it is a point (position vector), 0 if it is a direction (or normal vector).</p>
<div class="arithmatex">\[
T=\begin{bmatrix}R &amp; t\\0 &amp; 1\end{bmatrix}=\begin{bmatrix}T_{11} &amp; T_{12} &amp; T_{13} &amp; t_x\\
T_{21} &amp; T_{22} &amp; T_{23} &amp; t_y\\
T_{31} &amp; T_{32} &amp; T_{33} &amp; t_z\\
0 &amp; 0 &amp; 0 &amp; 1\end{bmatrix}
\]</div>
<h2 id="axis-angle-representation">Axis angle representation</h2>
<p>If we have a rotation matrix, we can find the axis (a unit vector) and the angle <span class="arithmatex">\(\theta\)</span> so that rotating around the axis by <span class="arithmatex">\(\theta\)</span> gives the same result as the rotation matrix.</p>
<p>The trace of a matrix is related to the angle we want. The trace of a rotation matrix is given by: <span class="arithmatex">\(1 + 2\cos \theta\)</span>.</p>
<p>We can calculate the trace and solve for theta: <span class="arithmatex">\(\cos \theta = (\text{trace} - 1)/2\)</span>. Then <span class="arithmatex">\(\theta\)</span> would be the arccos of that value:</p>
<div class="arithmatex">\[
\theta = \arccos(\frac{\text{trace}(R)-1}{2})
\]</div>
<p>The axis of rotation is the vector that remains unchanged by the rotation matrix. So, if <span class="arithmatex">\(\bf{v}\)</span> were the axis then <span class="arithmatex">\(R\bf{v}=\bf{v}\)</span>. Thus, <span class="arithmatex">\(\bf{v}\)</span> is an eigenvector of <span class="arithmatex">\(R\)</span>. An eigenvector of a matrix <span class="arithmatex">\(R\)</span> is a non-zero vector <span class="arithmatex">\(\bf{v}\)</span> such that when you multiply <span class="arithmatex">\(R\)</span> by <span class="arithmatex">\(\bf{v}\)</span>, you get a scalar multiple of <span class="arithmatex">\(\bf{v}\)</span>. That scalar is the eigenvalue <span class="arithmatex">\(\lambda\)</span>. So ematically, the eigenvalue must satisfy <span class="arithmatex">\(R\bf{v}=\lambda\bf{v}\)</span>. Since with this eigenvector we have <span class="arithmatex">\(R\bf{v}=\bf{v}\)</span>, we know that the eigenvalue of <span class="arithmatex">\(\bf{v}\)</span> must be 1.</p>
<p>This makes sense because the axis is the line around which everything else rotates, so it should stay fixed.</p>
<p>So for any rotation matrix <span class="arithmatex">\(R\)</span>, we know there exists an eigenvector <span class="arithmatex">\(\bf{v}\)</span> with eignevalue 1.</p>
<h3 id="finding-the-axis-vector">Finding the axis vector</h3>
<p>For <span class="arithmatex">\(\theta \neq 0, \pi\)</span>:</p>
<ol>
<li>Extract axis components from the off-diagonal terms of <span class="arithmatex">\(R\)</span>:</li>
</ol>
<div class="arithmatex">\[
\bf{v}=\begin{bmatrix}R_{32}-R_{23}\\R_{13}-R_{31}\\R_{21}-R_{12}\end{bmatrix}
\]</div>
<ol>
<li>Normalize the axis vector:</li>
</ol>
<div class="arithmatex">\[
\bf{v}_{\text{axis}}=\frac{\bf{v}}{2\sin \theta}
\]</div>
<p>Special case for <span class="arithmatex">\(\theta=\pi(180^\circ)\)</span></p>
<p>If <span class="arithmatex">\(\theta=\pi\)</span>, compute the axis components as:</p>
<div class="arithmatex">\[
\bf{v}=\begin{bmatrix}\pm\sqrt{(R_{11}+1)/2}\\
\pm\sqrt{(R_{22}+1)/2}\\
\pm\sqrt{(R_{33}+1)/2}\end{bmatrix}
\]</div>
<p>where signs are chosen to match the signs of <span class="arithmatex">\(R_{21},R_{32},R_{13}\)</span>.</p>
<p>The unique cases we are covering are as follows:</p>
<p><span class="arithmatex">\(\theta=0\)</span>: No unique axis.
<span class="arithmatex">\(\theta=\pi\)</span>: Axis signs depend on off-diagnonal terms.</p>
<p>Real-life scenarios where these edge cases might arise include:
* If the rotation is net-zero, creating the problem that there is no unique axis that remains unchanged (they all do)
    * Algorithms expecting a single axis may fail
* Half-rotation (<span class="arithmatex">\(180^\circ\)</span>) makes the standard normalization of the axis vector fail because <span class="arithmatex">\(\sin180^\circ=0\)</span>. Also sign ambiguities
    * Could result in miscalculation of rotation axis</p>
<h2 id="quaternions">Quaternions</h2>
<p>A quaternion has 4 components:</p>
<div class="arithmatex">\[
\bf{q}=w+x\bf{i}+y\bf{j}+z\bf{k}
\]</div>
<p><span class="arithmatex">\(w\)</span>: The scalar (real number) part.
<span class="arithmatex">\(x, y, z\)</span>: The vector (imaginary) parts.
<span class="arithmatex">\(\bf{i}, \bf{j}, \bf{k}\)</span>: Imaginary units with properties <span class="arithmatex">\(\bf{i}^2=\bf{j}^2=\bf{k}^2=\bf{i}\bf{j}\bf{k}=-1\)</span></p>
<p>A quaternion encoding a 3D rotation is defined by:
1. Rotation Axis: A 3D unit vector <span class="arithmatex">\(\bf{v}=(v_x,v_y,v_z)\)</span>
2. Rotation Angle: <span class="arithmatex">\(\theta\)</span> (in radians)</p>
<div class="arithmatex">\[
\bf{q}=cos\frac{\theta}{2}+\sin\frac{\theta}{2}\cdot(v_x\bf{i}+v_y\bf{j}+v_z\bf{k})
\]</div>
<h3 id="sum-of-quaternions">Sum of quaternions</h3>
<div class="arithmatex">\[
q=q_w+q_xi+q_yj+q_zk
\]</div>
<div class="arithmatex">\[
p=p_w+p_xi+p_yj+p_zk
\]</div>
<div class="arithmatex">\[
q+p=q_w+p_w+(q_x+p_x)i+(q_y+p_y)j+(q_z+p_z)k
\]</div>
<h3 id="product-of-quaternions">Product of quaternions</h3>
<p><span class="arithmatex">\(i^2=-1\)</span>, <span class="arithmatex">\(j^2=-1\)</span>, <span class="arithmatex">\(k^2=-1\)</span></p>
<p><span class="arithmatex">\(ij=k=-ji\)</span></p>
<p><span class="arithmatex">\(jk=i=-kj\)</span></p>
<p><span class="arithmatex">\(ki=j=-ik\)</span></p>
<p>Multiplication is not commutative.</p>
<h3 id="complex-conjugate">Complex conjugate</h3>
<p><span class="arithmatex">\(q=q_w+q_xi+q_yj+q_zk\)</span></p>
<p><span class="arithmatex">\(q^*=q_w-q_xi-q_yj-q_zk\)</span></p>
<h3 id="inverse">Inverse</h3>
<div class="arithmatex">\[
q^{-1}=\frac{q^*}{\lvert\lvert q \rvert\rvert^2}
\]</div>
<p>...or if <span class="arithmatex">\(q\)</span> has unit length: <span class="arithmatex">\(q^{-1}=q^*\)</span></p>
<p><span class="arithmatex">\(q^{-1}\)</span> is a number such that <span class="arithmatex">\(qq^{-1}=1\)</span></p>
<p><span class="arithmatex">\(\lvert\lvert q \rvert\rvert^2=qq^*=q_w^2+q_x^2+q_y^2+q_z^2\)</span></p>
<h3 id="properties-of-quaternions">Properties of quaternions</h3>
<p>If we have <span class="arithmatex">\(\bf{v}, \theta\)</span>, then our quaternion could look like:</p>
<div class="arithmatex">\[
q=\begin{bmatrix}\cos\frac{\theta}{2}\\\bf{v}_x\sin\frac{\theta}{2}\\\bf{v}_y\sin\frac{\theta}{2}\\\bf{v}_z\sin\frac{\theta}{2}\end{bmatrix}
\]</div>
<p>If two rotations have different angles, then their quaternion representations must also differ in the scalar component.</p>
<p>If two rotations have different rotation axes, then their quaternion representations must also differ in at least one of the vector components.</p>
<p>If two quaternions have different scalar components, then their corresponding rotation angles must be different.</p>
<p>If the vector components of two quaternions differ in at least one coordinate, then the corresponding rotation axes must be different.</p>
<p>The point is, <strong>quaternion representations are unique</strong>.</p>
<h3 id="applying-rotations">Applying rotations</h3>
<p>Suppose we have a point <span class="arithmatex">\(\bf{p}^A\)</span> and we know <span class="arithmatex">\(q^{A \rightarrow B}\)</span>:</p>
<p><span class="arithmatex">\(\bf{p}^B=q^{A \rightarrow B}\bf{p}^A(q^{A \rightarrow B})^*\)</span></p>
<h3 id="composing-rotations">Composing rotations</h3>
<p>If we know <span class="arithmatex">\(q^{A \rightarrow B}\)</span> and <span class="arithmatex">\(q^{B \rightarrow C}\)</span> then <span class="arithmatex">\(q^{A \rightarrow C} = q^{B \rightarrow C}q^{A \rightarrow B}\)</span>.</p>
<h2 id="pros-and-cons-of-different-rotation-methods">Pros and cons of different rotation methods</h2>
<table>
<thead>
<tr>
<th>Rotation method</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Euler angles</td>
<td>Intuitive</td>
<td>Ambiguity in ordering convention; numerical instability</td>
</tr>
<tr>
<td>Rotation matrices</td>
<td>Allows homogeneous representation; easy to apply, invert, and combine</td>
<td>Many parameters</td>
</tr>
<tr>
<td>Axis angle</td>
<td>Intuitive; can calculate size of rotation</td>
<td>Need to compute eigenvalues</td>
</tr>
<tr>
<td>Quaternions</td>
<td>Easy to convert to axis-angle; easy to apply, invert, and combine</td>
<td>Poor intuition</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>